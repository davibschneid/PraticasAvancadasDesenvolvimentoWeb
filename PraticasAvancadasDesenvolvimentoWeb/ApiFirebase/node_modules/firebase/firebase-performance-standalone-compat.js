!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((c=c.apply(e,a||[])).next())})}function h(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var t,n=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[u])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i,o,a,s=e[n++];s<128?t[r++]=String.fromCharCode(s):191<s&&s<224?(o=e[n++],t[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))):(o=e[n++],a=e[n++],t[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw new u;r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==c&&r.push(s<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=(e(o,t=Error),o);function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="DecodeBase64StringError",e}var a=function(e){return t=n(e),i.encodeByteArray(t,!0).replace(/\./g,"");var t};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}function s(){return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__}function l(){if("undefined"!=typeof document){try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var e=e&&function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return e&&JSON.parse(e)}}var m=function(){try{return s()||function(){if("undefined"!=typeof process&&void 0!==process.env){var e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||l()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},b=function(){var e;return null===(e=m())||void 0===e?void 0:e.config},y=(_.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},_);function _(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}function w(){return"undefined"!=typeof window||E()}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function S(){try{return"object"==typeof indexedDB}catch(e){return}}function I(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}var C,T=(e(A,C=Error),A);function A(e,t,n){var r=C.call(this,t)||this;return r.code=e,r.customData=n,r.name="FirebaseError",Object.setPrototypeOf(r,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,O.prototype.create),r}var O=(D.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},o="".concat(this.service,"/").concat(e),a=this.errors[e],a=a?(r=i,a.replace(N,function(e,t){var n=r[t];return null!=n?String(n):"<".concat(t,"?>")})):"Error",a="".concat(this.serviceName,": ").concat(a," (").concat(o,").");return new T(o,a,i)},D);function D(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var N=/\{\$([^}]+)}/g;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e,t){if(e===t)return 1;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return;var s=e[a],c=t[a];if(M(s)&&M(c)){if(!k(s,c))return}else if(s!==c)return}for(var u=0,l=r;u<l.length;u++){a=l[u];if(!n.includes(a))return}return 1}function M(e){return null!==e&&"object"==typeof e}function R(e,t){var n=new L(e,t);return n.subscribe.bind(n)}var L=(B.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},B.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},B.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},B.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},B.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},B.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},B.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},B.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},B);function B(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function j(){}var F=(x.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},x.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},x.prototype.setServiceProps=function(e){return this.serviceProps=e,this},x.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},x);function x(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var U="[DEFAULT]",z=(V.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new y;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},V.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}},V.prototype.getComponent=function(){return this.component},V.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:U})}catch(e){}try{for(var r=d(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=v(i.value,2),a=o[0],s=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},V.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?U:e),this.instancesOptions.delete(e),this.instances.delete(e)},V.prototype.delete=function(){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(g(g([],v(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),!1),v(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()})),!1))];case 1:return e.sent(),[2]}})})},V.prototype.isComponentSet=function(){return null!=this.component},V.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?U:e)},V.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?U:e)||{}},V.prototype.initialize=function(e){var t,n,r=(e=void 0===e?{}:e).options,r=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=d(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var c=v(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},V.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(n,r);var i=this.instances.get(n);return i&&e(i,n),function(){r.delete(e)}},V.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=d(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},V.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t)===U?void 0:e,options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(e){}return n||null},V.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=U),!this.component||this.component.multipleInstances?e:U},V.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},V);function V(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var H=(q.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},q.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},q.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new z(e,this);return this.providers.set(e,t),t},q.prototype.getProviders=function(){return Array.from(this.providers.values())},q);function q(e){this.name=e,this.providers=new Map}var W,$=[];(mn=W=W||{})[mn.DEBUG=0]="DEBUG",mn[mn.VERBOSE=1]="VERBOSE",mn[mn.INFO=2]="INFO",mn[mn.WARN=3]="WARN",mn[mn.ERROR=4]="ERROR",mn[mn.SILENT=5]="SILENT";function K(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=X[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[o].apply(console,g(["[".concat(i,"]  ").concat(e.name,":")],n,!1))}}var J,G={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},Y=W.INFO,X=((pt={})[W.DEBUG]="log",pt[W.VERBOSE]="log",pt[W.INFO]="info",pt[W.WARN]="warn",pt[W.ERROR]="error",pt),Z=(Object.defineProperty(Q.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in W))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),Q.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?G[e]:e},Object.defineProperty(Q.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),Q.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,g([this,W.DEBUG],e,!1)),this._logHandler.apply(this,g([this,W.DEBUG],e,!1))},Q.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,g([this,W.VERBOSE],e,!1)),this._logHandler.apply(this,g([this,W.VERBOSE],e,!1))},Q.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,g([this,W.INFO],e,!1)),this._logHandler.apply(this,g([this,W.INFO],e,!1))},Q.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,g([this,W.WARN],e,!1)),this._logHandler.apply(this,g([this,W.WARN],e,!1))},Q.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,g([this,W.ERROR],e,!1)),this._logHandler.apply(this,g([this,W.ERROR],e,!1))},Q);function Q(e){this.name=e,this._logLevel=Y,this._logHandler=K,this._userLogHandler=null,$.push(this)}function ee(a,t){for(var e=0,n=$;e<n.length;e++)!function(e){var o=null;t&&t.level&&(o=G[t.level]),e.userLogHandler=null===a?null:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=o?o:e.logLevel)&&a({level:W[t].toLowerCase(),message:i,args:n,type:e.name})}}(n[e])}const te=(t,e)=>e.some(e=>t instanceof e);let ne,re;const ie=new WeakMap,oe=new WeakMap,ae=new WeakMap,se=new WeakMap,ce=new WeakMap;let ue={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return oe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ae.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pe(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function le(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(re=re||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(r)?function(...e){return r.apply(he(this),e),pe(ie.get(this))}:function(...e){return pe(r.apply(he(this),e))}:function(e,...t){var n=r.call(he(this),e,...t);return ae.set(n,e.sort?e.sort():[e]),pe(n)}}function fe(e){return"function"==typeof e?le(e):(e instanceof IDBTransaction&&(o=e,oe.has(o)||(t=new Promise((e,t)=>{const n=()=>{o.removeEventListener("complete",r),o.removeEventListener("error",i),o.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{t(o.error||new DOMException("AbortError","AbortError")),n()};o.addEventListener("complete",r),o.addEventListener("error",i),o.addEventListener("abort",i)}),oe.set(o,t))),te(e,ne=ne||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,ue):e);var o,t}function pe(e){if(e instanceof IDBRequest)return function(o){const e=new Promise((e,t)=>{const n=()=>{o.removeEventListener("success",r),o.removeEventListener("error",i)},r=()=>{e(pe(o.result)),n()},i=()=>{t(o.error),n()};o.addEventListener("success",r),o.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&ie.set(e,o)}).catch(()=>{}),ce.set(e,o),e}(e);if(se.has(e))return se.get(e);var t=fe(e);return t!==e&&(se.set(e,t),ce.set(t,e)),t}const he=e=>ce.get(e);function de(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=pe(a);return r&&a.addEventListener("upgradeneeded",e=>{r(pe(a.result),e.oldVersion,e.newVersion,pe(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const ve=["get","getKey","getAll","getAllKeys","count"],ge=["put","add","delete","clear"],me=new Map;function be(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(me.get(t))return me.get(t);const i=t.replace(/FromIndex$/,""),o=t!==i,a=ge.includes(i);if(i in(o?IDBIndex:IDBObjectStore).prototype&&(a||ve.includes(i))){var n=async function(e,...t){var n=this.transaction(e,a?"readwrite":"readonly");let r=n.store;return o&&(r=r.index(t.shift())),(await Promise.all([r[i](...t),a&&n.done]))[0]};return me.set(t,n),n}}}ue={...J=ue,get:(e,t,n)=>be(e,t)||J.get(e,t,n),has:(e,t)=>!!be(e,t)||J.has(e,t)};var ye=(_e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}).filter(function(e){return e}).join(" ")},_e);function _e(e){this.container=e}var we="@firebase/app",Ee="0.10.8",Se=new Z("@firebase/app"),Ie="[DEFAULT]",Ce=((Re={})[we]="fire-core",Re["@firebase/app-compat"]="fire-core-compat",Re["@firebase/analytics"]="fire-analytics",Re["@firebase/analytics-compat"]="fire-analytics-compat",Re["@firebase/app-check"]="fire-app-check",Re["@firebase/app-check-compat"]="fire-app-check-compat",Re["@firebase/auth"]="fire-auth",Re["@firebase/auth-compat"]="fire-auth-compat",Re["@firebase/database"]="fire-rtdb",Re["@firebase/database-compat"]="fire-rtdb-compat",Re["@firebase/functions"]="fire-fn",Re["@firebase/functions-compat"]="fire-fn-compat",Re["@firebase/installations"]="fire-iid",Re["@firebase/installations-compat"]="fire-iid-compat",Re["@firebase/messaging"]="fire-fcm",Re["@firebase/messaging-compat"]="fire-fcm-compat",Re["@firebase/performance"]="fire-perf",Re["@firebase/performance-compat"]="fire-perf-compat",Re["@firebase/remote-config"]="fire-rc",Re["@firebase/remote-config-compat"]="fire-rc-compat",Re["@firebase/storage"]="fire-gcs",Re["@firebase/storage-compat"]="fire-gcs-compat",Re["@firebase/firestore"]="fire-fst",Re["@firebase/firestore-compat"]="fire-fst-compat",Re["@firebase/vertexai-preview"]="fire-vertex",Re["fire-js"]="fire-js",Re.firebase="fire-js-all",Re),Te=new Map,Ae=new Map,Oe=new Map;function De(t,n){try{t.container.addComponent(n)}catch(e){Se.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function Ne(e,t){e.container.addOrOverwriteComponent(t)}function Pe(e){var t,n,r,i,o=e.name;if(Oe.has(o))return Se.debug("There were multiple attempts to register component ".concat(o,".")),!1;Oe.set(o,e);try{for(var a=d(Te.values()),s=a.next();!s.done;s=a.next())De(s.value,e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}try{for(var c=d(Ae.values()),u=c.next();!u.done;u=c.next())De(u.value,e)}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return!0}function ke(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Me(e){return void 0!==e.options}var Re=((pt={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",pt["bad-app-name"]="Illegal App name: '{$appName}'",pt["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",pt["app-deleted"]="Firebase App named '{$appName}' already deleted",pt["server-app-deleted"]="Firebase Server App has been deleted",pt["no-options"]="Need to provide options, when not being deployed to hosting via source.",pt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",pt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",pt["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",pt["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",pt["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",pt["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",pt["finalization-registry-not-supported"]="FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",pt["invalid-server-app-environment"]="FirebaseServerApp is not for use in browser environments.",pt),Le=new O("app","Firebase",Re),Be=(Object.defineProperty(je.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),je.prototype.checkDestroyed=function(){if(this.isDeleted)throw Le.create("app-deleted",{appName:this._name})},je);function je(e,t,n){var r=this;this._isDeleted=!1,this._options=p({},e),this._config=p({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",function(){return r},"PUBLIC"))}var Fe,xe=(e(Ue,Fe=Be),Ue.prototype.toJSON=function(){},Object.defineProperty(Ue.prototype,"refCount",{get:function(){return this._refCount},enumerable:!1,configurable:!0}),Ue.prototype.incRefCount=function(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))},Ue.prototype.decRefCount=function(){return this.isDeleted?0:--this._refCount},Ue.prototype.automaticCleanup=function(){He(this)},Object.defineProperty(Ue.prototype,"settings",{get:function(){return this.checkDestroyed(),this._serverConfig},enumerable:!1,configurable:!0}),Ue.prototype.checkDestroyed=function(){if(this.isDeleted)throw Le.create("server-app-deleted")},Ue);function Ue(e,t,n,r){var i=this,o=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,a={name:n,automaticDataCollectionEnabled:o};return(i=void 0!==e.apiKey?Fe.call(this,e,a,r)||this:Fe.call(this,e.options,a,r)||this)._serverConfig=p({automaticDataCollectionEnabled:o},t),i._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(i._finalizationRegistry=new FinalizationRegistry(function(){i.automaticCleanup()})),i._refCount=0,i.incRefCount(i._serverConfig.releaseOnDeref),i._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,qe(we,Ee,"serverapp"),i}var ze="10.12.5";function Ve(e,t){var n,r,i=e,o=p({name:Ie,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),a=o.name;if("string"!=typeof a||!a)throw Le.create("bad-app-name",{appName:String(a)});if(!(i=i||b()))throw Le.create("no-options");var s=Te.get(a);if(s){if(k(i,s.options)&&k(o,s.config))return s;throw Le.create("duplicate-app",{appName:a})}var c=new H(a);try{for(var u=d(Oe.values()),l=u.next();!l.done;l=u.next()){var f=l.value;c.addComponent(f)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}o=new Be(i,o,c);return Te.set(a,o),o}function He(r){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return t=!1,n=r.name,Te.has(n)?(t=!0,Te.delete(n)):Ae.has(n)&&r.decRefCount()<=0&&(Ae.delete(n),t=!0),t?[4,Promise.all(r.container.getProviders().map(function(e){return e.delete()}))]:[3,2];case 1:e.sent(),r.isDeleted=!0,e.label=2;case 2:return[2]}})})}function qe(e,t,n){var r=null!==(a=Ce[e])&&void 0!==a?a:e;n&&(r+="-".concat(n));var i=r.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var a=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return i&&a.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),i&&o&&a.push("and"),o&&a.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Se.warn(a.join(" "))}Pe(new F("".concat(r,"-version"),function(){return{library:r,version:t}},"VERSION"))}function We(e,t){if(null!==e&&"function"!=typeof e)throw Le.create("invalid-log-argument");ee(e,t)}function $e(e){var t;t=e,$.forEach(function(e){e.setLogLevel(t)})}var Ke="firebase-heartbeat-database",Je=1,Ge="firebase-heartbeat-store",Ye=null;function Xe(){return Ye=Ye||de(Ke,Je,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(Ge)}catch(e){console.warn(e)}}}).catch(function(e){throw Le.create("idb-open",{originalErrorMessage:e.message})})}function Ze(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,Xe()];case 1:return n=e.sent(),t=n.transaction(Ge,"readwrite"),[4,t.objectStore(Ge).put(i,Qe(r))];case 2:return e.sent(),[4,t.done];case 3:return e.sent(),[3,5];case 4:return(n=e.sent())instanceof T?Se.warn(n.message):(n=Le.create("idb-set",{originalErrorMessage:null==n?void 0:n.message}),Se.warn(n.message)),[3,5];case 5:return[2]}})})}function Qe(e){return"".concat(e.name,"!").concat(e.options.appId)}var et=(tt.prototype.triggerHeartbeat=function(){var i;return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return(t=this.container.getProvider("platform-logger").getImmediate(),t=t.getPlatformInfoString(),n=nt(),null!=(null===(i=this._heartbeatsCache)||void 0===i?void 0:i.heartbeats))?[3,2]:[4,(r=this)._heartbeatsCachePromise];case 1:if(r._heartbeatsCache=e.sent(),null==(null===(i=this._heartbeatsCache)||void 0===i?void 0:i.heartbeats))return[2];e.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(function(e){return e.date===n})?[2]:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),[2,this._storage.overwrite(this._heartbeatsCache)])}})})},tt.prototype.getHeartbeatsHeader=function(){var i;return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:e.sent(),e.label=2;case 2:return null==(null===(i=this._heartbeatsCache)||void 0===i?void 0:i.heartbeats)||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=nt(),n=function(e,n){var t,r;void 0===n&&(n=1024);var i=[],o=e.slice();try{for(var a=d(e),s=a.next();!s.done;s=a.next())if("break"===function(t){var e=i.find(function(e){return e.agent===t.agent});if(e){if(e.dates.push(t.date),at(i)>n)return e.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),at(i)>n)return i.pop(),"break";o=o.slice(1)}(s.value))break}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return{heartbeatsToSend:i,unsentEntries:o}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,n=n.unsentEntries,r=a(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<n.length?(this._heartbeatsCache.heartbeats=n,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return e.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),e.label=5;case 5:return[2,r]}})})},tt);function tt(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new it(n),this._heartbeatsCachePromise=this._storage.read().then(function(e){return t._heartbeatsCache=e})}function nt(){return(new Date).toISOString().substring(0,10)}var rt,it=(ot.prototype.runIndexedDBEnvironmentCheck=function(){return f(this,void 0,void 0,function(){return h(this,function(e){return S()?[2,I().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},ot.prototype.read=function(){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,Xe()];case 1:return r=e.sent(),[4,(t=r.transaction(Ge)).objectStore(Ge).get(Qe(i))];case 2:return n=e.sent(),[4,t.done];case 3:return e.sent(),[2,n];case 4:return(r=e.sent())instanceof T?Se.warn(r.message):(r=Le.create("idb-get",{originalErrorMessage:null==r?void 0:r.message}),Se.warn(r.message)),[3,5];case 5:return[2]}})})}(this.app)];case 3:return null!=(t=e.sent())&&t.heartbeats?[2,t]:[2,{heartbeats:[]}];case 4:return[2]}})})},ot.prototype.overwrite=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Ze(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:n.heartbeats})]}})})},ot.prototype.add=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Ze(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:g(g([],v(t.heartbeats),!1),v(n.heartbeats),!1)})]}})})},ot);function ot(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}function at(e){return a(JSON.stringify({version:2,heartbeats:e})).length}rt="",Pe(new F("platform-logger",function(e){return new ye(e)},"PRIVATE")),Pe(new F("heartbeat",function(e){return new et(e)},"PRIVATE")),qe(we,Ee,rt),qe(we,Ee,"esm5"),qe("fire-js","");var st=Object.freeze({__proto__:null,SDK_VERSION:ze,_DEFAULT_ENTRY_NAME:Ie,_addComponent:De,_addOrOverwriteComponent:Ne,_apps:Te,_clearComponents:function(){Oe.clear()},_components:Oe,_getProvider:ke,_isFirebaseApp:Me,_isFirebaseServerApp:function(e){return void 0!==e.settings},_registerComponent:Pe,_removeServiceInstance:function(e,t,n){void 0===n&&(n=Ie),ke(e,t).clearInstance(n)},_serverApps:Ae,deleteApp:He,getApp:function(e){var t=Te.get(e=void 0===e?Ie:e);if(!t&&e===Ie&&b())return Ve();if(!t)throw Le.create("no-app",{appName:e});return t},getApps:function(){return Array.from(Te.values())},initializeApp:Ve,initializeServerApp:function(e,t){var n,r;if(w()&&!E())throw Le.create("invalid-server-app-environment");void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1);var i=Me(e)?e.options:e,o=p(p({},t),i);if(void 0!==o.releaseOnDeref&&delete o.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw Le.create("finalization-registry-not-supported",{});var a=""+g([],v(JSON.stringify(o)),!1).reduce(function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0},0),o=Ae.get(a);if(o)return o.incRefCount(t.releaseOnDeref),o;var s=new H(a);try{for(var c=d(Oe.values()),u=c.next();!u.done;u=c.next()){var l=u.value;s.addComponent(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return i=new xe(i,t,a,s),Ae.set(a,i),i},onLog:We,registerVersion:qe,setLogLevel:$e,FirebaseError:T}),ct=(Object.defineProperty(ut.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(ut.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),ut.prototype.delete=function(){var t=this;return new Promise(function(e){t._delegate.checkDestroyed(),e()}).then(function(){return t.firebase.INTERNAL.removeApp(t.name),He(t._delegate)})},ut.prototype._getService=function(e,t){var n;void 0===t&&(t=Ie),this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},ut.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=Ie),this._delegate.container.getProvider(e).clearInstance(t)},ut.prototype._addComponent=function(e){De(this._delegate,e)},ut.prototype._addOrOverwriteComponent=function(e){Ne(this._delegate,e)},ut.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},ut);function ut(e,t){var n=this;this._delegate=e,this.firebase=t,De(e,new F("app-compat",function(){return n},"PUBLIC")),this.container=e.container}var Re=((pt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",pt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",pt),lt=new O("app-compat","Firebase",Re);function ft(i){var o={},a={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={});var n=Ve(e,t);if(P(o,n.name))return o[n.name];var r=new i(n,a);return o[n.name]=r},app:s,registerVersion:qe,setLogLevel:$e,onLog:We,apps:null,SDK_VERSION:ze,INTERNAL:{registerComponent:function(n){var r=n.name,t=r.replace("-compat","");{var e;Pe(n)&&"PUBLIC"===n.type&&(e=function(e){if("function"!=typeof(e=void 0===e?s():e)[t])throw lt.create("invalid-app-argument",{appName:r});return e[t]()},void 0!==n.serviceProps&&c(e,n.serviceProps),a[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])})}return"PUBLIC"===n.type?a[t]:null},removeApp:function(e){delete o[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:st}};function s(e){if(!P(o,e=e||Ie))throw lt.create("no-app",{appName:e});return o[e]}return a.default=a,Object.defineProperty(a,"apps",{get:function(){return Object.keys(o).map(function(e){return o[e]})}}),s.App=i,a}var pt=function e(){var t=ft(ct);return t.INTERNAL=p(p({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){c(t,e)},createSubscribe:R,ErrorFactory:O,deepExtend:c}),t}(),Re=new Z("@firebase/app-compat");w()&&void 0!==window.firebase&&(Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(dt=window.firebase.SDK_VERSION)&&0<=dt.indexOf("LITE")&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var ht=pt;qe("@firebase/app-compat","0.2.38",void 0);ht.registerVersion("firebase","10.12.5","app-compat");var dt="@firebase/installations",Re="0.6.8",vt=1e4,gt="w:".concat(Re),mt="FIS_v2",bt="https://firebaseinstallations.googleapis.com/v1",yt=36e5,pt=((pt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',pt["not-registered"]="Firebase Installation is not registered.",pt["installation-not-found"]="Firebase Installation not found.",pt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',pt["app-offline"]="Could not process request. Application offline.",pt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",pt),_t=new O("installations","Installations",pt);function wt(e){return e instanceof T&&e.code.includes("request-failed")}function Et(e){var t=e.projectId;return"".concat(bt,"/projects/").concat(t,"/installations")}function St(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function It(n,r){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return t=e.sent(),t=t.error,[2,_t.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function Ct(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Tt(e,t){var n=t.refreshToken,r=Ct(e);return r.append("Authorization",(e=n,"".concat(mt," ").concat(e))),r}function At(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function Ot(t){return new Promise(function(e){setTimeout(e,t)})}var Dt=/^[cdef][\w-]{21}$/,Nt="";function Pt(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return btoa(String.fromCharCode.apply(String,g([],v(e),!1))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22);return Dt.test(t)?t:Nt}catch(e){return Nt}}function kt(e){return"".concat(e.appName,"!").concat(e.appId)}var Mt=new Map;function Rt(e,t){var n=kt(e);Lt(n,t),function(e,t){var n=function(){!Bt&&"BroadcastChannel"in self&&((Bt=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Lt(e.data.key,e.data.fid)});return Bt}();n&&n.postMessage({key:e,fid:t});0===Mt.size&&Bt&&(Bt.close(),Bt=null)}(n,t)}function Lt(e,t){var n,r,i=Mt.get(e);if(i)try{for(var o=d(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Bt=null;var jt="firebase-installations-store",Ft=null;function xt(){return Ft=Ft||de("firebase-installations-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(jt)}})}function Ut(o,a){return f(this,void 0,void 0,function(){var t,n,r,i;return h(this,function(e){switch(e.label){case 0:return t=kt(o),[4,xt()];case 1:return r=e.sent(),n=r.transaction(jt,"readwrite"),[4,(r=n.objectStore(jt)).get(t)];case 2:return i=e.sent(),[4,r.put(a,t)];case 3:return e.sent(),[4,n.done];case 4:return e.sent(),i&&i.fid===a.fid||Rt(o,a.fid),[2,a]}})})}function zt(r){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return t=kt(r),[4,xt()];case 1:return n=e.sent(),[4,(n=n.transaction(jt,"readwrite")).objectStore(jt).delete(t)];case 2:return e.sent(),[4,n.done];case 3:return e.sent(),[2]}})})}function Vt(a,s){return f(this,void 0,void 0,function(){var t,n,r,i,o;return h(this,function(e){switch(e.label){case 0:return t=kt(a),[4,xt()];case 1:return r=e.sent(),n=r.transaction(jt,"readwrite"),[4,(r=n.objectStore(jt)).get(t)];case 2:return i=e.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,r.put(o,t)];case 5:e.sent(),e.label=6;case 6:return[4,n.done];case 7:return e.sent(),!o||i&&i.fid===o.fid||Rt(a,o.fid),[2,o]}})})}function Ht(i){return f(this,void 0,void 0,function(){var n,t,r;return h(this,function(e){switch(e.label){case 0:return[4,Vt(i.appConfig,function(e){var t=Wt(e||{fid:Pt(),registrationStatus:0}),t=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,qt(i.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Ot(100)];case 3:return e.sent(),[4,qt(i.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ht(i)];case 6:return r=e.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(_t.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(e,t){var s=e.appConfig,c=e.heartbeatServiceProvider,u=t.fid;return f(this,void 0,void 0,function(){var t,n,r,i,o,a;return h(this,function(e){switch(e.label){case 0:return t=Et(s),n=Ct(s),(r=c.getImmediate({optional:!0}))?[4,r.getHeartbeatsHeader()]:[3,2];case 1:(r=e.sent())&&n.append("x-firebase-client",r),e.label=2;case 2:return a={fid:u,authVersion:mt,appId:s.appId,sdkVersion:gt},i={method:"POST",headers:n,body:JSON.stringify(a)},[4,At(function(){return fetch(t,i)})];case 3:return(o=e.sent()).ok?[4,o.json()]:[3,5];case 4:return a=e.sent(),[2,{fid:a.fid||u,registrationStatus:2,refreshToken:a.refreshToken,authToken:St(a.authToken)}];case 5:return[4,It("Create Installation",o)];case 6:throw e.sent()}})})}(r,i)];case 1:return t=e.sent(),[2,Ut(r.appConfig,t)];case 2:return wt(n=e.sent())&&409===n.customData.serverCode?[4,zt(r.appConfig)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,Ut(r.appConfig,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:n}}}(i,t);return n=t.registrationPromise,t.installationEntry})];case 1:return(t=e.sent()).fid!==Nt?[3,3]:(r={},[4,n]);case 2:return[2,(r.installationEntry=e.sent(),r)];case 3:return[2,{installationEntry:t,registrationPromise:n}]}})})}function qt(e){return Vt(e,function(e){if(!e)throw _t.create("installation-not-found");return Wt(e)})}function Wt(e){return 1===(t=e).registrationStatus&&t.registrationTime+vt<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function $t(e,c){var u=e.appConfig,l=e.heartbeatServiceProvider;return f(this,void 0,void 0,function(){var n,r,i,o,a,s;return h(this,function(e){switch(e.label){case 0:return t=c.fid,n="".concat(Et(u),"/").concat(t,"/authTokens:generate"),r=Tt(u,c),(i=l.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(i=e.sent())&&r.append("x-firebase-client",i),e.label=2;case 2:return s={installation:{sdkVersion:gt,appId:u.appId}},o={method:"POST",headers:r,body:JSON.stringify(s)},[4,At(function(){return fetch(n,o)})];case 3:return(a=e.sent()).ok?[4,a.json()]:[3,5];case 4:return s=e.sent(),[2,St(s)];case 5:return[4,It("Generate Auth Token",a)];case 6:throw e.sent()}var t})})}function Kt(i,o){return void 0===o&&(o=!1),f(this,void 0,void 0,function(){var r,t,n;return h(this,function(e){switch(e.label){case 0:return[4,Vt(i.appConfig,function(e){if(!Gt(e))throw _t.create("not-registered");var t,n=e.authToken;if(o||2!==(t=n).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+yt}(t)){if(1===n.requestStatus)return r=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return[4,Jt(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,Ot(100)];case 3:return e.sent(),[4,Jt(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,Kt(r,i)]:[2,n]}})})}(i,o),e;if(!navigator.onLine)throw _t.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},p(p({},t),{authToken:n}));return r=function(i,o){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,$t(i,o)];case 1:return t=e.sent(),r=p(p({},o),{authToken:t}),[4,Ut(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!wt(n=e.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,zt(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=p(p({},o),{authToken:{requestStatus:0}}),[4,Ut(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return e})];case 1:return t=e.sent(),r?[4,r]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function Jt(e){return Vt(e,function(e){if(!Gt(e))throw _t.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+vt<Date.now()?p(p({},e),{authToken:{requestStatus:0}}):e})}function Gt(e){return void 0!==e&&2===e.registrationStatus}function Yt(n,r){return void 0===r&&(r=!1),f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,function(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,Ht(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t=n)];case 1:return e.sent(),[4,Kt(t,r)];case 2:return[2,e.sent().token]}})})}function Xt(e){return _t.create("missing-app-config-values",{valueName:e})}function Zt(e){var t=ke(e.getProvider("app").getImmediate(),Qt).getImmediate();return{getId:function(){return function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,Ht(t=i)];case 1:return n=e.sent(),r=n.installationEntry,(n.registrationPromise||Kt(t)).catch(console.error),[2,r.fid]}})})}(t)},getToken:function(e){return Yt(t,e)}}}var Qt="installations";Pe(new F(Qt,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw Xt("App Configuration");if(!e.name)throw Xt("App Name");try{for(var r=d(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Xt(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:ke(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),Pe(new F("installations-internal",Zt,"PRIVATE")),qe(dt,Re),qe(dt,Re,"esm5");var en,tn,nn="@firebase/performance",rn="0.6.8",on=rn,an="FB-PERF-TRACE-MEASURE",sn="@firebase/performance/config",cn="@firebase/performance/configexpire",dt="Performance",Re=((Re={})["trace started"]="Trace {$traceName} was started before.",Re["trace stopped"]="Trace {$traceName} is not running.",Re["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Re["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Re["no window"]="Window is not available.",Re["no app id"]="App id is not available.",Re["no project id"]="Project id is not available.",Re["no api key"]="Api key is not available.",Re["invalid cc log"]="Attempted to queue invalid cc event",Re["FB not default"]="Performance can only start when Firebase app instance is the default one.",Re["RC response not ok"]="RC response is not ok",Re["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Re["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Re["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Re["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Re["already initialized"]="initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.",Re),un=new O("performance",dt,Re),ln=new Z(dt);ln.logLevel=W.INFO;var fn,pn,hn=(dn.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},dn.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},dn.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},dn.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},dn.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},dn.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},dn.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!S()||(ln.info("IndexedDB is not supported by current browser"),!1):(ln.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},dn.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},dn.getInstance=function(){return en=void 0===en?new dn(tn):en},dn);function dn(e){if(!(this.window=e))throw un.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function vn(e,t){var n=e.length-t.length;if(n<0||1<n)throw un.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var gn,mn,bn=(yn.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},yn.getInstance=function(){return pn=void 0===pn?new yn:pn},yn);function yn(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=vn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=vn("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(mn=gn=gn||{})[mn.UNKNOWN=0]="UNKNOWN",mn[mn.VISIBLE=1]="VISIBLE",mn[mn.HIDDEN=2]="HIDDEN";var _n=["firebase_","google_","ga_"],wn=new RegExp("^[a-zA-Z]\\w*$");function En(){switch(hn.getInstance().document.visibilityState){case"visible":return gn.VISIBLE;case"hidden":return gn.HIDDEN;default:return gn.UNKNOWN}}function Sn(e){var t=null===(t=e.options)||void 0===t?void 0:t.appId;if(!t)throw un.create("no app id");return t}var In="0.0.1",Cn={loggingEnabled:!0},Tn="FIREBASE_INSTALLATIONS_AUTH";function An(e,t){var r,i,n=function(){var e=hn.getInstance().localStorage;if(e){var t=e.getItem(cn);if(t&&function(e){return Number(e)>Date.now()}(t)){e=e.getItem(sn);if(e)try{return JSON.parse(e)}catch(e){return}}}}();return n?(Dn(n),Promise.resolve()):(i=t,function(e){var t=e.getToken();return t.then(function(e){}),t}((r=e).installations).then(function(e){var t=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!t)throw un.create("no project id");return t}(r.app),n=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!t)throw un.create("no api key");return t}(r.app),n="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(t,"/namespaces/fireperf:fetch?key=").concat(n),n=new Request(n,{method:"POST",headers:{Authorization:"".concat(Tn," ").concat(e)},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:Sn(r.app),app_version:on,sdk_version:In})});return fetch(n).then(function(e){if(e.ok)return e.json();throw un.create("RC response not ok")})}).catch(function(){ln.info(On)}).then(Dn).then(function(e){var t;e=e,t=hn.getInstance().localStorage,e&&t&&(t.setItem(sn,JSON.stringify(e)),t.setItem(cn,String(Date.now()+60*bn.getInstance().configTimeToLive*60*1e3)))},function(){}))}var On="Could not fetch config, will use default configs";function Dn(e){if(!e)return e;var t=bn.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=Cn.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):Cn.logSource&&(t.logSource=Cn.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:Cn.logEndPointUrl&&(t.logEndPointUrl=Cn.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:Cn.transportKey&&(t.transportKey=Cn.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==Cn.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=Cn.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==Cn.tracesSamplingRate&&(t.tracesSamplingRate=Cn.tracesSamplingRate),t.logTraceAfterSampling=Nn(t.tracesSamplingRate),t.logNetworkAfterSampling=Nn(t.networkRequestsSamplingRate),e}function Nn(e){return Math.random()<=e}var Pn,kn=1;function Mn(e){var n;return kn=2,Pn=Pn||(n=e,function(){var n=hn.getInstance().document;return new Promise(function(e){var t;n&&"complete"!==n.readyState?(t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())},n.addEventListener("readystatechange",t)):e()})}().then(function(){return e=n.installations,(t=e.getId()).then(function(e){fn=e}),t;var e,t}).then(function(e){return An(n,e)}).then(Rn,Rn))}function Rn(){kn=3}var Ln,Bn=1e4,jn=3,Fn=1e3,xn=jn,Un=[],zn=!1;function Vn(e){setTimeout(function(){var e,t;if(0!==xn)return Un.length?(e=Un.splice(0,Fn),t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),void function(e,r){return function(e){var t=bn.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||ln.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),n=Bn;isNaN(t)||(n=Math.max(t,n));t=e.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Un=g(g([],r,!0),Un,!0),ln.info("Retry transport request later.")),xn=jn,Vn(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:bn.getInstance().logSource,log_event:t},e).catch(function(){Un=g(g([],e,!0),Un,!0),xn--,ln.info("Tries left: ".concat(xn,".")),Vn(Bn)})):Vn(Bn)},e)}function Hn(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw un.create("invalid cc log");Un=g(g([],Un,!0),[e],!1)}({message:n.apply(void 0,e),eventTime:Date.now()})}}function qn(e,t){(Ln=Ln||Hn(Kn))(e,t)}function Wn(e){var t=bn.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&hn.getInstance().requiredApisAvailable()&&(e.isAuto&&En()!==gn.VISIBLE||(3===kn?$n(e):Mn(e.performanceController).then(function(){return $n(e)},function(){return $n(e)})))}function $n(e){var t;!fn||(t=bn.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return qn(e,1)},0)}function Kn(e,t){return 0===t?(n={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Jn(e.performanceController.app),network_request_metric:n},JSON.stringify(n)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);t={application_info:Jn(e.performanceController.app),trace_metric:t};return JSON.stringify(t)}(e);var n}function Jn(e){return{google_app_id:Sn(e),app_instance_id:fn,web_app_info:{sdk_version:on,page_url:hn.getInstance().getUrl(),service_worker_status:null!=(t=hn.getInstance().navigator)&&t.serviceWorker?t.serviceWorker.controller?2:3:1,visibility_state:En(),effective_connection_type:function(){var e=hn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var Gn=["_fp","_fcp","_fid"];var Yn=(Xn.prototype.start=function(){if(1!==this.state)throw un.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Xn.prototype.stop=function(){if(2!==this.state)throw un.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Wn(this)},Xn.prototype.record=function(e,t,n){if(e<=0)throw un.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw un.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=p({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Math.floor(Number(n.metrics[o])))}Wn(this)},Xn.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},Xn.prototype.putMetric=function(e,t){if(r=e,i=this.name,0===r.length||100<r.length||!(i&&i.startsWith("_wt_")&&-1<Gn.indexOf(r))&&r.startsWith("_"))throw un.create("invalid custom metric name",{customMetricName:e});var n,r,i;this.counters[e]=(t=null!=t?t:0,(n=Math.floor(t))<t&&ln.info("Metric value should be an Integer, setting the value as : ".concat(n,".")),n)},Xn.prototype.getMetric=function(e){return this.counters[e]||0},Xn.prototype.putAttribute=function(e,t){var n,r,i=!(0===(n=e).length||40<n.length)&&(!_n.some(function(e){return n.startsWith(e)})&&!!n.match(wn)),o=0!==(r=t).length&&r.length<=100;if(i&&o)this.customAttributes[e]=t;else{if(!i)throw un.create("invalid attribute name",{attributeName:e});if(!o)throw un.create("invalid attribute value",{attributeValue:t})}},Xn.prototype.getAttribute=function(e){return this.customAttributes[e]},Xn.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},Xn.prototype.getAttributes=function(){return p({},this.customAttributes)},Xn.prototype.setStartTime=function(e){this.startTimeUs=e},Xn.prototype.setDuration=function(e){this.durationUs=e},Xn.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},Xn.createOobTrace=function(e,t,n,r){var i,o=hn.getInstance().getUrl();o&&(i=new Xn(e,"_wt_"+o,!0),o=Math.floor(1e3*hn.getInstance().getTimeOrigin()),i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n&&((o=n.find(function(e){return"first-paint"===e.name}))&&o.startTime&&i.putMetric("_fp",Math.floor(1e3*o.startTime)),(o=n.find(function(e){return"first-contentful-paint"===e.name}))&&o.startTime&&i.putMetric("_fcp",Math.floor(1e3*o.startTime)),r&&i.putMetric("_fid",Math.floor(1e3*r))),Wn(i))},Xn.createUserTimingTrace=function(e,t){Wn(new Xn(e,t,!1,t))},Xn);function Xn(e,t,n,r){void 0===n&&(n=!1),this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=hn.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(an,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}function Zn(e,t){var n,r,i,o,a=t;a&&void 0!==a.responseStart&&(i=hn.getInstance().getTimeOrigin(),o=Math.floor(1e3*(a.startTime+i)),r=a.responseStart?Math.floor(1e3*(a.responseStart-a.startTime)):void 0,i=Math.floor(1e3*(a.responseEnd-a.startTime)),a={performanceController:e,url:a.name&&a.name.split("?")[0],responsePayloadBytes:a.transferSize,startTimeUs:o,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},n=a,(o=bn.getInstance()).instrumentationEnabled&&(r=n.url,i=o.logEndPointUrl.split("?")[0],a=o.flTransportEndpointUrl.split("?")[0],r!==i&&r!==a&&o.loggingEnabled&&o.logNetworkAfterSampling&&setTimeout(function(){return qn(n,0)},0)))}var Qn=5e3;function er(e){fn&&(setTimeout(function(){return function(t){var e=hn.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");{var i;e.onFirstInputDelay?(i=setTimeout(function(){Yn.createOobTrace(t,n,r),i=void 0},Qn),e.onFirstInputDelay(function(e){i&&(clearTimeout(i),Yn.createOobTrace(t,n,r,e))})):Yn.createOobTrace(t,n,r)}}(e)},0),setTimeout(function(){return function(t){for(var e=hn.getInstance(),n=e.getEntriesByType("resource"),r=0,i=n;r<i.length;r++){var o=i[r];Zn(t,o)}e.setupObserver("resource",function(e){return Zn(t,e)})}(e)},0),setTimeout(function(){return function(t){for(var e=hn.getInstance(),n=e.getEntriesByType("measure"),r=0,i=n;r<i.length;r++){var o=i[r];tr(t,o)}e.setupObserver("measure",function(e){return tr(t,e)})}(e)},0))}function tr(e,t){var n=t.name;n.substring(0,an.length)!==an&&Yn.createUserTimingTrace(e,n)}var nr=(rr.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),hn.getInstance().requiredApisAvailable()?I().then(function(e){e&&(zn||(Vn(5500),zn=!0),Mn(t).then(function(){return er(t)},function(){return er(t)}),t.initialized=!0)}).catch(function(e){ln.info("Environment doesn't support IndexedDB: ".concat(e))}):ln.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty(rr.prototype,"instrumentationEnabled",{get:function(){return bn.getInstance().instrumentationEnabled},set:function(e){bn.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(rr.prototype,"dataCollectionEnabled",{get:function(){return bn.getInstance().dataCollectionEnabled},set:function(e){bn.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),rr);function rr(e,t){this.app=e,this.installations=t,this.initialized=!1}var ir="[DEFAULT]";Pe(new F("performance",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(r.name!==ir)throw un.create("FB not default");if("undefined"==typeof window)throw un.create("no window");tn=window;i=new nr(r,i);return i._init(n),i},"PUBLIC")),qe(nn,rn),qe(nn,rn,"esm5");var or=(Object.defineProperty(ar.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(ar.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),ar.prototype.trace=function(e){return t=this._delegate,t=(n=t)&&n._delegate?n._delegate:n,new Yn(t,e);var t,n},ar);function ar(e,t){this.app=e,this._delegate=t}var sr;function cr(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new or(t,n)}(sr=ht).INTERNAL.registerComponent(new F("performance-compat",cr,"PUBLIC")),sr.registerVersion("@firebase/performance-compat","0.2.8");return ht.registerVersion("firebase","10.12.5","compat-lite"),ht});
//# sourceMappingURL=firebase-performance-standalone-compat.js.map
